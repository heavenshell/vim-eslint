sudo: required
dist: xenial
language: vim
node_js: stable

before_install:
  - node -v
  - curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version 1.13.0
  - export PATH=$HOME/.yarn/bin:$PATH
install:
  - git clone https://github.com/junegunn/vader.vim.git tests/vader.vim
  - git clone https://github.com/Quramy/tsuquyomi.git tests/tsuquyomi.git
  - git clone https://github.com/vim/vim /tmp/vim
  - cd /tmp/vim
  - sudo apt-get install -y gettext libncurses5-dev libacl1-dev libgpm-dev
  - ./configure --with-features=huge --enable-fail-if-missing --enable-pythoninterp --prefix=$HOME/bin/vim
  - make && make install
  - git clone https://github.com/junegunn/vader.vim.git
  - export VIM_EXE=$HOME/bin/vim/bin/vim
  - cd $HOME/build/heavenshell/vim-eslint/tests
  - yarn

before_script:
  - cd $HOME/build/heavenshell/vim-eslint/tests

script:
  - VIM_EXE=$HOME/bin/vim/bin/vim ./run.sh > /dev/null && echo Success || echo Fail
